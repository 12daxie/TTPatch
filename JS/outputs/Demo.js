_import('UIView,UILabel,UIImage,UIColor,TTView,ViewController,UITableViewCell,UITableView,NSIndexPath,UIFont,TTTableView,UIScreen,UIImageView,TaoBaoHome');defineClass('ViewController:UIViewController', {data: property(),loadJSCode: function () {let dataSource = ['加载纯JS模块','JS-OC block调用示例','淘宝大事故修复方案','动态添加数据'];self.c('setData_', dataSource);let data = self.c('data');let tableview = self.c('getTableview');tableview.c('setTableHeaderView_', self.c('createPageHeader'));self.c('setTableview_', tableview);self.c('view').c('addSubview_', tableview);self.c('setTitle_', 'Demo.js');},tableView_numberOfRowsInSection_: function (tableview, section) {let data = self.c('data');return data.length;},tableView_cellForRowAtIndexPath_: function (tableview, indexPath) {let cell = UITableViewCell.c('alloc').c('initWithStyle_reuseIdentifier_', 1, 'cell');let data = self.c('data')[indexPath.c('row')];cell.c('textLabel').c('setText_', '<' + data + '>');return cell;},tableView_didSelectRowAtIndexPath_: function (tableview, indexPath) {if (indexPath.c('row') === 0) {let vc = JSRootViewController.c('new');self.c('navigationController').c('pushViewController_animated_', vc, true);vc = null;} else if (indexPath.c('row') === 1) {let vc = BlockViewController.c('new');self.c('navigationController').c('pushViewController_animated_', vc, true);vc = null;} else if (indexPath.c('row') === 2) {let vc = TaoBaoHome.c('new');self.c('navigationController').c('pushViewController_animated_', vc, true);vc = null;} else {let dataSource = self.c('data');dataSource.c('push', '点击加载更多Cell');self.c('setData_', dataSource);self.c('tableview').c('reloadData');}},getTableview: function () {_tableview = TTTableView.c('alloc').c('initWithFrame_style_', self.c('view').c('bounds'), 0);_tableview.c('setDelegate_', self);_tableview.c('setDataSource_', self);return _tableview;},params1_params2_params3_params4_params5_params6_params7_: function (params1, params2, params3, params4, params5, params6, params7) {Util.c('nLog', 0, '--------多参数测试---------');Util.c('log', params1, params2, params3, params4, params5, params6, params7);},createPageHeader: function () {var label = UILabel.c('new');label.c('setFont_', UIFont.c('systemFontOfSize_', 18));label.c('setTextColor_', UIColor.c('whiteColor'));label.c('setBackgroundColor_', UIColor.c('systemGreenColor'));label.c('setFrame_', new TTReact(10, self.c('view').c('frame').size.width * 0.75, self.c('view').c('bounds').size.width - 20, self.c('view').c('frame').size.height * 0.15));label.c('setText_', '具体功能实例 \n\n动态加载纯JS页面, JS与OC之间的Block传递,调用');label.c('setNumberOfLines_', 0);return label;}}, {});defineClass('JSRootViewController:UIViewController', {dealloc: function () {Utils.log('TestViewController->已释放');},viewDidLoad: function () {Super().c('viewDidLoad');self.c('setTitle_', '动态下发模块');self.c('view').c('setBackgroundColor_', UIColor.c('whiteColor'));let screenWidth = UIScreen.c('mainScreen').c('bounds').size.width;let screenHeight = UIScreen.c('mainScreen').c('bounds').size.height;let logo = UIImageView.c('new');logo.c('setImage_', UIImage.c('imageNamed_', 'applelogo'));logo.c('setFrame_', new TTReact(50, 50, 100, 100));logo.c('setCenter_', new TTPoint(screenWidth / 2, 150));let title = UILabel.c('new');title.c('setText_', 'Apple');title.c('setFont_', UIFont.c('fontWithName_size_', 'GillSans-UltraBold', 25));title.c('setTextAlignment_', 1);title.c('setFrame_', new TTReact(50, 150, 100, 100));title.c('setCenter_', new TTPoint(screenWidth / 2, 270));self.c('view').c('addSubview_', logo);self.c('view').c('addSubview_', title);{let title = UILabel.c('new');title.c('setText_', '------------------------\n本页面由纯JS编写,具体使用场景可结合自身业务使用\n------------------------');title.c('setNumberOfLines_', 0);title.c('setTextAlignment_', 1);title.c('setFrame_', new TTReact(50, 150, 200, 300));title.c('setCenter_', new TTPoint(screenWidth / 2, 370));self.c('view').c('addSubview_', title);}}}, {});defineClass('BlockViewController:UITableViewController', {dealloc: function () {Utils.log('BlockViewController->已释放');},viewDidLoad: function () {Super().c('viewDidLoad');self.c('setTitle_', '动态下发模块');self.c('view').c('setBackgroundColor_', UIColor.c('whiteColor'));let screenWidth = UIScreen.c('mainScreen').c('bounds').size.width;let screenHeight = UIScreen.c('mainScreen').c('bounds').size.height;let logo = UIImageView.c('new');logo.c('setImage_', UIImage.c('imageNamed_', 'applelogo'));logo.c('setFrame_', new TTReact(50, 50, 100, 100));logo.c('setCenter_', new TTPoint(screenWidth / 2, screenHeight - 250));let title = UILabel.c('new');title.c('setText_', 'Apple');title.c('setFont_', UIFont.c('fontWithName_size_', 'GillSans-UltraBold', 25));title.c('setTextAlignment_', 1);title.c('setFrame_', new TTReact(50, 150, 150, 100));title.c('setCenter_', new TTPoint(screenWidth / 2, screenHeight - 150));self.c('view').c('addSubview_', logo);self.c('view').c('addSubview_', title);},btnAction_: function (index) {switch (index) {case 0: {self.c('testCall0_', block(''), function () {Utils.log('--------JS传入OC方法,接受到回调--------- 无参数,无返回值');Utils.log_info('--------JS传入OC方法,接受到回调--------- 无参数,无返回值');});}break;case 1: {self.c('testCall1_', block('void,NSString*,int'), function (arg1, arg2) {Utils.log('--------JS传入OC方法,接受到回调--------- 有参数,无返回值' + arg1 + arg2);Utils.log_info('--------JS传入OC方法,接受到回调--------- 有参数,无返回值' + arg1 + arg2);});}break;case 2: {self.c('testCall2_', block('NSString*,NSString*'), function (arg) {Utils.log('--------JS传入OC方法,接受到回调--------- 有参数,有返回值:string' + arg);Utils.log_info('--------JS传入OC方法,接受到回调--------- 有参数,有返回值:string' + arg);return '这是有返回值的哦';});}break;case 3: {self.c('testCall3_', block('NSString*,void'), function () {Utils.log('--------JS传入OC方法,接受到回调--------- 无参数,有返回值:string');Utils.log_info('--------JS传入OC方法,接受到回调--------- 无参数,有返回值:string');return '这是有返回值的哦';});}break;case 4: {self.c('runBlock');}break;default: {self.c('testCallVID_', block(',NSString *, NSString *, int, bool, float , NSNumber* '), function (arg1, arg2, arg3, arg4, arg5, arg6) {Utils.log('--------JS传入OC方法,接受到回调---------' + arg1 + '\n' + arg2 + '\n' + arg3 + '\n' + arg4 + '\n' + arg5 + '\n' + arg6);Utils.log_info('--------JS传入OC方法,接受到回调---------' + arg1 + '\n' + arg2 + '\n' + arg3 + '\n' + arg4 + '\n' + arg5 + '\n' + arg6);});self.c('OCcallBlock_', block(',NSString *'), function (arg1) {Utils.log('js与js block回调' + arg1);Utils.log_info('js与js block回调' + arg1);});}break;}},callBlock_: function (callback) {if (callback) {callback(10);}}}, {});